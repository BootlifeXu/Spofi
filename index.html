<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Music Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: #f0f0f0;
            color: #333;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 20px;
        }

        .search-bar {
            grid-column: 1 / 2;
            grid-row: 1 / 2;
            display: flex;
            border: 2px solid #333;
            border-radius: 4px;
            overflow: hidden;
        }

        #search-input {
            flex-grow: 1;
            padding: 10px;
            border: none;
            font-size: 16px;
            background-color: #fff;
        }

        #search-button {
            width: 40px;
            background-color: #333;
            color: #f0f0f0;
            border: none;
            cursor: pointer;
        }

        .music-player {
            grid-column: 1 / 3;
            grid-row: 2 / 3;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 15px;
            background-color: #fff;
            display: flex;
            align-items: center;
        }

        .player-controls {
            display: flex;
            gap: 10px;
            margin-right: 15px;
        }

        .control-button {
            background-color: #333;
            color: #f0f0f0;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 16px;
            cursor: pointer;
        }

        .song-info {
            flex-grow: 1;
        }

        .song-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .song-artist {
            font-size: 14px;
        }

        .progress-container {
            width: 100%;
            height: 5px;
            background-color: #ddd;
            border-radius: 5px;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            width: 0;
            background-color: #333;
            border-radius: 5px;
            transition: width 0.5s;
        }

        .search-results {
            grid-column: 1 / 2;
            grid-row: 3 / 4;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 15px;
            background-color: #fff;
            height: 300px;
            overflow-y: auto;
        }

        .favorites {
            grid-column: 2 / 3;
            grid-row: 3 / 4;
            border: 2px solid #333;
            border-radius: 4px;
            padding: 15px;
            background-color: #fff;
            height: 300px;
            overflow-y: auto;
        }

        .song-list {
            list-style: none;
        }

        .song-item {
            padding: 10px;
            cursor: pointer;
            border-bottom: 1px solid #ddd;
        }

        .song-item:hover {
            background-color: #f0f0f0;
        }

        .section-title {
            margin-bottom: 10px;
            text-align: center;
            font-weight: bold;
        }

        .playing {
            background-color: #333;
            color: #f0f0f0;
        }

        #auth-status {
            grid-column: 2 / 3;
            grid-row: 1 / 2;
            text-align: right;
            font-size: 14px;
            padding: 5px;
        }

        .error {
            color: red;
        }

        .login-button {
            background-color: #333;
            color: #f0f0f0;
            border: none;
            border-radius: 4px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 14px;
        }

        .song-duration {
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="search-bar">
            <input type="text" id="search-input" placeholder="search bar">
            <button id="search-button">üîç</button>
        </div>

        <div id="auth-status">
            <button id="login-button" class="login-button">Login</button>
        </div>

        <div class="music-player">
            <div class="player-controls">
                <button class="control-button" id="prev-btn">‚èÆ</button>
                <button class="control-button" id="play-pause-btn">‚ñ∂</button>
                <button class="control-button" id="next-btn">‚è≠</button>
            </div>
            <div class="song-info">
                <div class="song-title">Song player</div>
                <div class="song-artist">Select a song to play</div>
                <div class="song-duration">00:00</div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress"></div>
                </div>
            </div>
        </div>

        <div class="search-results">
            <div class="section-title">song result appear here list 1-10 first result</div>
            <ul class="song-list" id="search-results-list">
                <!-- Search results will appear here -->
            </ul>
        </div>

        <div class="favorites">
            <div class="section-title">below all favorite songs</div>
            <ul class="song-list" id="favorites-list">
                <!-- Favorite songs will appear here -->
            </ul>
        </div>
    </div>

    <script>
        // Mock data instead of using Spotify API
        const mockSearchResults = [
            { id: "1", name: "Bohemian Rhapsody", artists: [{ name: "Queen" }], duration_ms: 354000 },
            { id: "2", name: "Stairway to Heaven", artists: [{ name: "Led Zeppelin" }], duration_ms: 482000 },
            { id: "3", name: "Hotel California", artists: [{ name: "Eagles" }], duration_ms: 390000 },
            { id: "4", name: "Sweet Child O' Mine", artists: [{ name: "Guns N' Roses" }], duration_ms: 356000 },
            { id: "5", name: "Imagine", artists: [{ name: "John Lennon" }], duration_ms: 183000 },
            { id: "6", name: "Smells Like Teen Spirit", artists: [{ name: "Nirvana" }], duration_ms: 301000 },
            { id: "7", name: "Yesterday", artists: [{ name: "The Beatles" }], duration_ms: 125000 },
            { id: "8", name: "Like a Rolling Stone", artists: [{ name: "Bob Dylan" }], duration_ms: 369000 },
            { id: "9", name: "Thriller", artists: [{ name: "Michael Jackson" }], duration_ms: 357000 },
            { id: "10", name: "Billie Jean", artists: [{ name: "Michael Jackson" }], duration_ms: 294000 }
        ];

        const mockFavorites = [
            { id: "11", name: "Bogsa", artists: [{ name: "Benidic Fragata II" }], duration_ms: 276000 },
            { id: "12", name: "Hey Jude", artists: [{ name: "The Beatles" }], duration_ms: 431000 },
            { id: "13", name: "Wonderwall", artists: [{ name: "Oasis" }], duration_ms: 258000 },
            { id: "14", name: "Shape of You", artists: [{ name: "Ed Sheeran" }], duration_ms: 233000 },
            { id: "15", name: "Uptown Funk", artists: [{ name: "Mark Ronson ft. Bruno Mars" }], duration_ms: 270000 }
        ];

        // State variables
        let currentTrackId = null;
        let isPlaying = false;
        let currentTrackList = [];
        let currentTrackIndex = -1;
        let progressInterval = null;
        let progressValue = 0;
        let isLoggedIn = false;

        // DOM Elements
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const searchResultsList = document.getElementById('search-results-list');
        const favoritesList = document.getElementById('favorites-list');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const songTitle = document.querySelector('.song-title');
        const songArtist = document.querySelector('.song-artist');
        const songDuration = document.querySelector('.song-duration');
        const progressBar = document.getElementById('progress');
        const authStatus = document.getElementById('auth-status');
        const loginButton = document.getElementById('login-button');

        // Format time in mm:ss
        function formatTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Update login status
        function updateAuthStatus(message, isError = false) {
            if (isError) {
                authStatus.innerHTML = `<span class="error">${message}</span>`;
            } else {
                authStatus.innerHTML = message;
            }
        }

        // Mock login function
        function toggleLogin() {
            isLoggedIn = !isLoggedIn;
            if (isLoggedIn) {
                updateAuthStatus('Logged in');
                loginButton.textContent = 'Logout';
                displayFavorites(mockFavorites);
            } else {
                updateAuthStatus('Not logged in');
                loginButton.textContent = 'Login';
                favoritesList.innerHTML = '<li class="song-item">Login to see favorites</li>';
            }
        }

        // Display favorites
        function displayFavorites(tracks) {
            favoritesList.innerHTML = '';
            
            if (!tracks || tracks.length === 0) {
                const li = document.createElement('li');
                li.className = 'song-item';
                li.textContent = 'No saved tracks found';
                favoritesList.appendChild(li);
                return;
            }
            
            tracks.forEach(track => {
                const li = document.createElement('li');
                li.className = 'song-item';
                li.setAttribute('data-id', track.id);
                li.textContent = `${track.name} - ${track.artists.map(artist => artist.name).join(', ')}`;
                
                li.addEventListener('click', () => {
                    playSong(track, tracks);
                });
                
                favoritesList.appendChild(li);
            });
        }

        // Play a song (no actual Spotify playback)
        function playSong(track, trackList) {
            // Stop any existing progress simulation
            if (progressInterval) {
                clearInterval(progressInterval);
            }
            
            currentTrackId = track.id;
            
            // Update track list if provided
            if (trackList) {
                currentTrackList = trackList;
                currentTrackIndex = currentTrackList.findIndex(t => t.id === track.id);
            }
            
            // Update player info
            songTitle.textContent = track.name;
            songArtist.textContent = track.artists.map(artist => artist.name).join(', ');
            songDuration.textContent = formatTime(track.duration_ms);
            
            // Reset progress
            progressValue = 0;
            progressBar.style.width = '0%';
            
            // Remove 'playing' class from all songs
            document.querySelectorAll('.song-item').forEach(item => {
                item.classList.remove('playing');
            });
            
            // Add 'playing' class to current song
            document.querySelectorAll(`.song-item[data-id="${track.id}"]`).forEach(item => {
                item.classList.add('playing');
            });
            
            isPlaying = true;
            playPauseBtn.textContent = '‚è∏';
            
            // Simulate progress
            simulatePlayback(track.duration_ms);
        }

        // Simulate song playback with progress bar
        function simulatePlayback(duration) {
            const updateInterval = 1000; // update every second
            const steps = duration / updateInterval;
            const increment = 100 / steps;
            
            progressInterval = setInterval(() => {
                if (isPlaying) {
                    progressValue += increment;
                    progressBar.style.width = `${progressValue}%`;
                    
                    const elapsedMs = (progressValue / 100) * duration;
                    songDuration.textContent = `${formatTime(elapsedMs)} / ${formatTime(duration)}`;
                    
                    if (progressValue >= 100) {
                        clearInterval(progressInterval);
                        playNextSong();
                    }
                }
            }, updateInterval);
        }

        // Next song
        function playNextSong() {
            if (!currentTrackList.length || currentTrackIndex === -1) return;
            
            currentTrackIndex = (currentTrackIndex + 1) % currentTrackList.length;
            playSong(currentTrackList[currentTrackIndex]);
        }

        // Previous song
        function playPrevSong() {
            if (!currentTrackList.length || currentTrackIndex === -1) return;
            
            currentTrackIndex = (currentTrackIndex - 1 + currentTrackList.length) % currentTrackList.length;
            playSong(currentTrackList[currentTrackIndex]);
        }

        // Handle search - using mock data instead of API
        searchButton.addEventListener('click', () => {
            const query = searchInput.value.trim().toLowerCase();
            if (!query) return;
            
            // Filter mock results based on query
            const filteredResults = mockSearchResults.filter(track => 
                track.name.toLowerCase().includes(query) || 
                track.artists.some(artist => artist.name.toLowerCase().includes(query))
            );
            
            searchResultsList.innerHTML = '';
            
            if (filteredResults.length === 0) {
                const li = document.createElement('li');
                li.className = 'song-item';
                li.textContent = 'No results found';
                searchResultsList.appendChild(li);
                return;
            }
            
            filteredResults.forEach(track => {
                const li = document.createElement('li');
                li.className = 'song-item';
                li.setAttribute('data-id', track.id);
                li.textContent = `${track.name} - ${track.artists.map(artist => artist.name).join(', ')}`;
                
                li.addEventListener('click', () => {
                    playSong(track, filteredResults);
                });
                
                searchResultsList.appendChild(li);
            });
        });

        // Toggle play/pause
        playPauseBtn.addEventListener('click', () => {
            if (!currentTrackId) return;
            
            isPlaying = !isPlaying;
            playPauseBtn.textContent = isPlaying ? '‚è∏' : '‚ñ∂';
        });

        // Next and previous buttons
        nextBtn.addEventListener('click', playNextSong);
        prevBtn.addEventListener('click', playPrevSong);

        // Search on Enter key
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchButton.click();
            }
        });

        // Login button
        loginButton.addEventListener('click', toggleLogin);

        // Initialize with empty favorites list
        window.addEventListener('load', () => {
            favoritesList.innerHTML = '<li class="song-item">Login to see favorites</li>';
        });
    </script>
</body>
</html>
